<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Squad — Inter Manila</title>

<style>
body{
margin:0;
font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg,#0f172a,#020617);
color:white;
text-align:center;
}

.header{
background:#020617;
padding:18px;
font-size:22px;
font-weight:bold;
border-bottom:2px solid #1e293b;
}

.container{
padding:25px;
max-width:500px;
margin:auto;
}

input, select{
width:100%;
padding:12px;
margin:10px 0;
border:none;
border-radius:10px;
background:#1e293b;
color:white;
font-size:14px;
}

button{
width:100%;
padding:14px;
margin-top:12px;
border:none;
border-radius:12px;
background:#2563eb;
color:white;
font-weight:bold;
font-size:15px;
cursor:pointer;
transition:0.2s;
}

button:hover{
background:#1d4ed8;
transform:scale(1.03);
}

.player{
background:#1e293b;
padding:12px;
border-radius:12px;
margin-top:10px;
text-align:left;
display:flex;
justify-content:space-between;
align-items:center;
}

.player-info{
flex:1;
}

.player button{
width:auto;
padding:6px 10px;
font-size:13px;
margin-left:10px;
background:#dc2626;
}

.player button:hover{
background:#b91c1c;
}

.back{
margin-top:20px;
display:block;
text-align:center;
color:#93c5fd;
text-decoration:none;
}
</style>
</head>

<body>

<div class="header">INTER MANILA — SQUAD</div>

<div class="container">

<h3>Add Player</h3>
<input id="name" placeholder="Player Name">
<input id="number" type="number" placeholder="Number">

<select id="pos">
<option>GK</option>
<option>DF</option>
<option>MF</option>
<option>FW</option>
</select>

<button onclick="addPlayer()">Add Player</button>

<h3>Player List</h3>
<div id="players">Loading...</div>

<a class="back" href="dashboard.html">← Back to Menu</a>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, updateDoc, doc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAuqUcXYjMU-XaL_w7h4y43RHku4dQGFlk",
  authDomain: "inter-manila.firebaseapp.com",
  projectId: "inter-manila",
  storageBucket: "inter-manila.firebasestorage.app",
  messagingSenderId: "285507279342",
  appId: "1:285507279342:web:5aa0c80a08fb92727416ff"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

/* Proteksi halaman */
onAuthStateChanged(auth, (user) => {
  if (!user) window.location.href="index.html";
});

/* Tambah pemain */
window.addPlayer = async function(){
  let name = document.getElementById("name").value.trim();
  let number = document.getElementById("number").value;
  let pos = document.getElementById("pos").value;

  if(!name || !number) return alert("Isi semua field");

  await addDoc(collection(db,"players"),{
    name,
    number,
    pos,
    goals:0,
    assist:0,
    saves:0,
    match:0
  });

  document.getElementById("name").value="";
  document.getElementById("number").value="";
  loadPlayers();
};

/* Hapus pemain */
window.deletePlayer = async function(id){
  if(confirm("Yakin ingin hapus pemain ini?")){
    await deleteDoc(doc(db,"players",id));
    loadPlayers();
  }
};

/* Load roster */
async function loadPlayers(){
  const snapshot = await getDocs(collection(db,"players"));
  let html="";

  snapshot.forEach((docSnap)=>{
    let p = docSnap.data();
    html+=`
      <div class="player">
        <div class="player-info">
          <b>#${p.number} ${p.name}</b><br>
          ${p.pos}<br>
          Goals: ${p.goals} | Assist: ${p.assist} | Saves: ${p.saves} | Match: ${p.match}
        </div>
        <button onclick="deletePlayer('${docSnap.id}')">Delete</button>
      </div>
    `;
  });

  document.getElementById("players").innerHTML = html;
}

loadPlayers();

</script>

</body>
</html>
