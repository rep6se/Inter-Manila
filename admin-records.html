<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Inter Manila â€” Club Records</title>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <style>
        :root { --primary: #2563eb; --dark: #020617; --surface: #1e293b; --accent: #60a5fa; --gold: #fbbf24; --silver: #94a3b8; --bronze: #d97706; --success: #10b981; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: radial-gradient(circle at top, #0f172a, #020617); color: #f1f5f9; min-height: 100vh; padding-bottom: 80px; display: none; }
        header { text-align: center; padding: 40px 0 20px; background: rgba(15, 23, 42, 0.9); border-bottom: 1px solid rgba(255,255,255,0.05); }
        header img { width: 55px; margin-bottom: 10px; filter: drop-shadow(0 0 15px rgba(37, 99, 235, 0.4)); }
        header h1 { margin: 0; font-size: 20px; color: var(--primary); text-transform: uppercase; letter-spacing: 3px; font-weight: 800; }
        nav { display: flex; justify-content: center; padding: 15px; gap: 10px; background: rgba(15, 23, 42, 0.95); position: sticky; top: 0; z-index: 100; backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255,255,255,0.05); }
        nav a { text-decoration: none; background: rgba(30, 41, 59, 0.5); color: #64748b; padding: 12px 18px; border-radius: 16px; font-size: 11px; font-weight: 700; display: flex; align-items: center; gap: 8px; }
        nav a.active { background: var(--primary); color: white; box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3); }
        .container { max-width: 500px; margin: 20px auto; padding: 0 15px; }
        select { width: 100%; padding: 15px; background: var(--surface); color: white; border: 1px solid rgba(255,255,255,0.1); border-radius: 18px; font-weight: 700; outline: none; margin-bottom: 20px; }
        .trophy-section { background: rgba(255,255,255,0.03); border-radius: 30px; padding: 20px; margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.05); }
        .section-label { font-size: 10px; font-weight: 800; color: var(--accent); text-transform: uppercase; margin-bottom: 15px; display: flex; justify-content: space-between; }
        .t-row { display: flex; align-items: center; gap: 12px; background: rgba(0,0,0,0.2); padding: 10px 15px; border-radius: 15px; margin-bottom: 8px; }
        .t-gold { color: var(--gold); } .t-silver { color: var(--silver); } .t-bronze { color: var(--bronze); }
        .awards-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
        .award-box { background: #1e293b; padding: 15px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.08); text-align: center; }
        .award-box i { font-size: 22px; margin-bottom: 8px; display: block; }
        .award-box.motm i { color: var(--success); } .award-box.mvp i { color: var(--gold); }
        .award-box b { display: block; font-size: 13px; color: #fff; }
        .admin-summary { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 25px; }
        .stat-card { background: rgba(30, 41, 59, 0.4); border-radius: 18px; padding: 12px 5px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }
        .stat-card b { display: block; font-size: 18px; color: #fff; }
        .stat-card small { font-size: 8px; color: #64748b; text-transform: uppercase; }
        .tab-nav { display: flex; background: rgba(15, 23, 42, 0.6); padding: 5px; border-radius: 18px; margin-bottom: 20px; gap: 5px; }
        .tab-btn { flex: 1; border: none; background: none; color: #64748b; padding: 12px; border-radius: 14px; font-weight: 800; font-size: 10px; cursor: pointer; }
        .tab-btn.active { background: var(--primary); color: white; }
        .record-container { display: none; } .record-container.active { display: block; }
        .player-row { background: rgba(30, 41, 59, 0.2); border-radius: 20px; padding: 15px; margin-bottom: 10px; display: flex; align-items: center; position: relative; overflow: hidden; cursor: pointer; }
        .progress-bar { position: absolute; left: 0; top: 0; bottom: 0; background: linear-gradient(90deg, rgba(37, 99, 235, 0.1), transparent); border-left: 3px solid var(--primary); z-index: 0; }
        .modal { display: none; position: fixed; inset: 0; z-index: 1000; background: rgba(2, 6, 23, 0.9); backdrop-filter: blur(10px); padding: 20px; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: var(--surface); width: 100%; max-width: 400px; border-radius: 30px; padding: 25px; border: 1px solid rgba(255,255,255,0.1); }
        input, select { width: 100%; padding: 14px; margin-bottom: 12px; background: #0f172a; border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 14px; }
        .p-stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .p-stat-item { background: rgba(0,0,0,0.2); padding: 12px; border-radius: 18px; text-align: center; border: 1px solid rgba(255,255,255,0.03); }
        .p-stat-item b { color: var(--accent); font-size: 18px; }
    </style>
</head>
<body>
    <header><img src="inter-milan-old.png" alt="Logo"><h1>Club Records</h1></header>
    <nav>
        <a href="admin-dashboard.html"><i class="fa fa-house"></i> Home</a>
        <a href="admin-squad.html"><i class="fa fa-users"></i> Squad</a>
        <a href="admin-matches.html"><i class="fa fa-futbol"></i> Matches</a>
        <a href="admin-records.html" class="active"><i class="fa fa-medal"></i> Records</a>
    </nav>
    <div class="container">
        <select id="_0xSF"><option value="all">All-Time Statistics</option></select>
        <div class="trophy-section">
            <div class="section-label"><span>Club Honors</span><i class="fa fa-trophy" style="color:var(--gold)"></i></div>
            <div id="_0xTL"></div>
            <button style="width:100%;padding:10px;border:1px dashed #444;background:none;color:#888;border-radius:12px;font-size:10px;font-weight:800;cursor:pointer;margin-top:10px;" onclick="_0xOM('tModal')">+ ADD TROPHY</button>
        </div>
        <div class="awards-grid">
            <div class="award-box motm"><i class="fa fa-medal"></i><b id="_0xBM">-</b><small>Most MOTM</small></div>
            <div class="award-box mvp"><i class="fa fa-crown"></i><b id="_0xBV">-</b><small>Most MVP</small></div>
        </div>
        <div class="admin-summary">
            <div class="stat-card"><b id="_0xTG">0</b><small>Goals</small></div>
            <div class="stat-card"><b id="_0xTA">0</b><small>Assists</small></div>
            <div class="stat-card"><b id="_0xTS">0</b><small>Saves</small></div>
            <div class="stat-card"><b id="_0xTC">0</b><small>CS</small></div>
        </div>
        <div class="tab-nav">
            <button class="tab-btn active" onclick="_0xST('goals', this)">GOALS</button>
            <button class="tab-btn" onclick="_0xST('assists', this)">ASSISTS</button>
            <button class="tab-btn" onclick="_0xST('saves', this)">SAVES</button>
        </div>
        <div id="goals" class="record-container active"></div>
        <div id="assists" class="record-container"></div>
        <div id="saves" class="record-container"></div>
    </div>

    <div id="tModal" class="modal">
        <div class="modal-content">
            <h3 style="text-align:center;margin-top:0">Add Honor</h3>
            <input type="text" id="_0xTN" placeholder="Competition Name">
            <input type="text" id="_0xTSi" placeholder="Season (e.g. S1)">
            <select id="_0xTR"><option value="gold">ðŸ¥‡ Winner</option><option value="silver">ðŸ¥ˆ Runner-up</option><option value="bronze">ðŸ¥‰ 3rd Place</option></select>
            <button style="width:100%;padding:15px;background:var(--primary);color:#fff;border:none;border-radius:12px;font-weight:800" onclick="_0xSV()">SAVE</button>
            <button style="width:100%;background:none;border:none;color:#666;margin-top:10px;cursor:pointer" onclick="_0xCM('tModal')">CANCEL</button>
        </div>
    </div>

    <div id="pModal" class="modal">
        <div class="modal-content" style="text-align:center">
            <h2 id="_0xPN" style="margin:0">-</h2>
            <div class="p-stat-grid" id="_0xPG"></div>
            <button style="width:100%;padding:15px;background:#334155;color:#fff;border:none;border-radius:12px;margin-top:20px;font-weight:700" onclick="_0xCM('pModal')">CLOSE</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp as _0xI } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth as _0xG, onAuthStateChanged as _0xC } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore as _0xF, collection as _0xCL, onSnapshot as _0xSN, doc as _0xDC, setDoc as _0xSD, deleteDoc as _0xDD, query as _0xQR, orderBy as _0xOB } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        const _0xcf = {
            apiKey: "AIzaSyAuqUcXYjMU-XaL_w7h4y43RHku4dQGFlk",
            authDomain: "inter-manila.firebaseapp.com",
            projectId: "inter-manila",
            storageBucket: "inter-manila.firebasestorage.app",
            messagingSenderId: "285507279342",
            appId: "1:285507279342:web:5aa0c80a08fb92727416ff"
        };

        const _0xA = _0xI(_0xcf); const _0xau = _0xG(_0xA); const _0xdb = _0xF(_0xA);
        let _0xPL = []; let _0xMA = []; let _0xGS = {};

        _0xC(_0xau, (u) => { if(u){ document.body.style.display="block"; _0xinit(); } else { window.location.href="login.html"; }});

        function _0xinit() {
            _0xSN(_0xQR(_0xCL(_0xdb, "trophies"), _0xOB("timestamp", "desc")), (sn) => {
                const l = document.getElementById('_0xTL'); l.innerHTML = "";
                sn.forEach(d => {
                    const t = d.data(); const r = `t-${t.rank}`;
                    l.innerHTML += `<div class="t-row"><i class="fa fa-medal ${r}"></i><div style="flex:1"><b style="font-size:12px">${t.name}</b><br><small style="color:#666">${t.season}</small></div><i class="fa fa-trash-alt" style="color:rgba(255,255,255,0.1);cursor:pointer" onclick="_0xDT('${d.id}')"></i></div>`;
                });
            });

            _0xSN(_0xCL(_0xdb, "matches"), (mSn) => {
                _0xMA = mSn.docs.map(d => d.data()); _0xUF();
                _0xSN(_0xCL(_0xdb, "players"), (pSn) => {
                    _0xPL = pSn.docs.map(d => ({id:d.id, ...d.data()})); _0xPD();
                });
            });
        }

        function _0xUF() {
            const s = document.getElementById('_0xSF'); const u = [...new Set(_0xMA.map(m => `${m.league||''} ${m.season||''}`.trim()))].sort();
            let h = '<option value="all">All-Time Statistics</option>';
            u.forEach(v => { if(v) h += `<option value="${v}">${v}</option>`; });
            s.innerHTML = h; s.onchange = () => _0xPD();
        }

        function _0xPD() {
            const f = document.getElementById('_0xSF').value;
            const fm = f === 'all' ? _0xMA : _0xMA.filter(m => `${m.league||''} ${m.season||''}`.trim() === f);
            let tg=0, ta=0, ts=0, tc=0; _0xGS={};
            _0xPL.forEach(p => _0xGS[p.id] = {...p, goals:0, assists:0, saves:0, apps:0, motm:0, mvp:0});
            fm.forEach(m => {
                tg += (m.homeScore||0); if(parseInt(m.awayScore)===0) tc++;
                if(m.motmId && _0xGS[m.motmId]) _0xGS[m.motmId].motm++;
                if(m.mvpId && _0xGS[m.mvpId]) _0xGS[m.mvpId].mvp++;
                const mp = new Set();
                if(m.scorers) m.scorers.forEach(s => {
                    if(_0xGS[s.id]){ 
                        _0xGS[s.id].goals+=(s.goals||0); _0xGS[s.id].assists+=(s.assists||0); 
                        _0xGS[s.id].saves+=(s.saves||0); ta+=(s.assists||0); ts+=(s.saves||0); mp.add(s.id); 
                    }
                });
                mp.forEach(id => _0xGS[id].apps++);
            });

            document.getElementById('_0xTG').innerText=tg; document.getElementById('_0xTA').innerText=ta;
            document.getElementById('_0xTS').innerText=ts; document.getElementById('_0xTC').innerText=tc;

            const allP = Object.values(_0xGS);
            const bM = [...allP].sort((a,b) => b.motm - a.motm)[0];
            const bV = [...allP].sort((a,b) => b.mvp - a.mvp)[0];

            document.getElementById('_0xBM').innerText = (bM && bM.motm > 0) ? bM.name : "-";
            document.getElementById('_0xBV').innerText = (bV && bV.mvp > 0) ? bV.name : "-";

            _0xRL('goals', allP, 'goals'); _0xRL('assists', allP, 'assists'); _0xRL('saves', allP, 'saves');
        }

        function _0xRL(id, d, f) {
            const c = document.getElementById(id); const s = d.filter(x => x[f]>0).sort((a,b)=>b[f]-a[f]);
            const mx = s.length ? s[0][f] : 1;
            c.innerHTML = s.map((p,i) => `<div class="player-row" onclick="_0xSP('${p.id}')"><div class="progress-bar" style="width:${(p[f]/mx)*100}%"></div><div style="flex:1;z-index:1"><b style="font-size:14px">${p.name}</b></div><b style="z-index:1;color:var(--accent)">${p[f]}</b></div>`).join('');
        }

        window._0xOM = (id) => document.getElementById(id).classList.add('active');
        window._0xCM = (id) => document.getElementById(id).classList.remove('active');
        window._0xST = (id, b) => { 
            document.querySelectorAll('.record-container').forEach(x=>x.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(x=>x.classList.remove('active'));
            document.getElementById(id).classList.add('active'); b.classList.add('active');
        };

        window._0xSV = async () => {
            const n = document.getElementById('_0xTN').value; const s = document.getElementById('_0xTSi').value;
            if(!n || !s) return; const id = Date.now().toString();
            await _0xSD(_0xDC(_0xdb, "trophies", id), {name:n, season:s, rank:document.getElementById('_0xTR').value, timestamp:id});
            _0xCM('tModal'); document.getElementById('_0xTN').value = ""; document.getElementById('_0xTSi').value = "";
        };

        window._0xDT = async (id) => { if(confirm("Delete trophy?")) await _0xDD(_0xDC(_0xdb, "trophies", id)); };

        window._0xSP = (id) => {
            const p = _0xGS[id]; document.getElementById('_0xPN').innerText = p.name;
            document.getElementById('_0xPG').innerHTML = `
                <div class="p-stat-item"><b>${p.apps}</b><br><small>Matches</small></div>
                <div class="p-stat-item"><b>${p.goals}</b><br><small>Goals</small></div>
                <div class="p-stat-item"><b>${p.assists}</b><br><small>Assists</small></div>
                <div class="p-stat-item"><b>${p.saves}</b><br><small>Saves</small></div>
                <div class="p-stat-item" style="border-color:var(--success)"><b style="color:var(--success)">${p.motm}</b><br><small>MOTM</small></div>
                <div class="p-stat-item" style="border-color:var(--gold)"><b style="color:var(--gold)">${p.mvp}</b><br><small>MVP</small></div>`;
            _0xOM('pModal');
        };
    </script>
</body>
                                                                 </html>
  
